<!DOCTYPE html>
<html xmlns:th="http://thymeleaf.org"
      xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout">
<head>
    <meta charset="UTF-8">
    <title>Lista Produtos</title>

    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.0/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-KyZXEAg3QhqLMpG8r+8fhAXLRk2vvoC2f3B09zVXn8CA5QIVfZOJ3BCsw2P0p/We" crossorigin="anonymous">

    <link rel="stylesheet" href="style/table-responsive.css">

    <!--Import Google Icon Font-->
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
    <!--Import materialize.css-->
    <link type="text/css" rel="stylesheet" href="style/materialize/css/materialize.min.css" media="screen,projection"/>
    <!-- Pagination -->
    <script type="text/javascript" src="https://code.jquery.com/jquery-2.2.1.min.js"></script>

    <link href="https://cdnjs.cloudflare.com/ajax/libs/materialize/0.98.2/css/materialize.min.css" rel="stylesheet" />

    <script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.1/jquery.min.js"></script>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/materialize/0.98.2/js/materialize.min.js"></script>

</head>
<body>

    <nav>
        <div class="nav-wrapper deep-purple darken-1">
            <a href="#!" class="brand-logo"><i class="material-icons">cloud</i>Produtos Cadastrados</a>
            <ul class="right hide-on-med-and-down" style="margin-top:-10px">
                <li><a style="color: black" href="/"><i class="material-icons">navigate_before</i>Voltar</a></li>
            </ul>
        </div>
    </nav>

    <div class="container">

        <div class="alert alert-success" role="alert" th:text="${success}" th:if="${success}"></div>
        <div class="alert alert-danger" role="alert" th:text="${error}" th:if="${error}"></div>

        <div class="row" style="margin-top: 20px">
            <div class="col s5">
                <input onkeydown="autoComplete('Produtos')" id="input-auto-complete"
                       class="autocomplete" type="text" placeholder="Buscar...">
            </div>
            <div class="col s1">
                <i style="margin-top: 33px" class="material-icons">search</i>
            </div>
            <div class="col s6 right-align">
                <a href="/formCadastroProduto" class="btn-floating"><i class="material-icons">add</i></a>
            </div>
        </div>
        <p class="center-align" style="font-size: 1.5em; margin: .5em 0 .75em;">Produtos</p>
        <table id="myTable">
            <thead>
            <tr>
                <th scope="col">Código</th>
                <th scope="col">Categoria</th>
                <th scope="col">Nome</th>
                <th scope="col">Descricão</th>
            </tr>
            </thead>
            <tbody>
            <tr th:each="produto : ${produtos}">
                <td data-label="Código">
                    <span>
                        <a class="tiny" style="color: black"
                           th:href="${(#mvc.url('PR#formEditProduto').arg(0, produto.codigo)).build()}">
                            <i class=" material-icons">mode_edit</i>
                        </a>
                    </span>
                    <span th:text="${produto.codigo}"></span>
                </td>
                <td data-label="Categoria"><span th:text="${produto.categoria.nome}"></span></td>
                <td data-label="Nome"><span th:text="${produto.nome}"></span></td>
                <td data-label="Descrição"><span th:text="${produto.descricao}"></span></td>
            </tr>
            </tbody>
        </table>

        <div class="col-md-12 center text-center">
            <span class="left" id="total_reg"></span>
            <ul class="pagination pager right" id="myPager"></ul>
        </div>
    </div>

    <script type="text/javascript" src="materialize/js/materialize.min.js"></script>
    <script type="text/javascript" src="style/js/pagination.js"></script>
    <script type="text/javascript" src="style/js/autocomplete.js"></script>
</body>
</html>